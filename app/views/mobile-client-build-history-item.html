<div class="mobile-client-build-history-item col-md-12">
  <div class="col-md-2">
    <span class="status-icon" ng-class="$ctrl.build.status.phase">
      <span ng-switch="$ctrl.build.status.phase" class="hide-ng-leave">
        <span ng-switch-when="Complete" aria-hidden="true">
          <i class="fa fa-check-circle fa-fw"></i>
        </span>
        <span ng-switch-when="Failed" aria-hidden="true">
          <i class="fa fa-times-circle fa-fw"></i>
        </span>
        <span ng-switch-default>
          <status-icon status="$ctrl.build.status.phase"></status-icon>
        </span>
      </span>
    </span>
    <a ng-href="{{$ctrl.build | navigateResourceURL}}">Build #{{$ctrl.build | annotation : 'buildNumber'}}</a>
  </div>
  <div class="col-md-2">
    <span>{{$ctrl.build.status.phase}}</span>
    <span ng-if="('builds/log' | canI : 'get')">
      <a style="margin-left:1em;" ng-href="{{$ctrl.build | buildLogURL}}">View Log</a>
    </span>
  </div>
  <div class="col-md-2">
    <span am-time-ago="$ctrl.build.metadata.creationTimestamp" class="build-timestamp"></span>
  </div>
  <div class="col-md-4">
    <span>Duration:</span>
    <span ng-switch="$ctrl.build.status.phase" class="hide-ng-leave">
      <span ng-switch-when="Complete">{{($ctrl.build.status.startTimestamp || $ctrl.build.metadata.creationTimestamp) | duration : $ctrl.build.status.completionTimestamp}}</span>
      <span ng-switch-when="Failed">{{$ctrl.build.status.startTimestamp | duration : $ctrl.build.status.completionTimestamp}}</span>
      <span ng-switch-when="Running">running for <duration-until-now timestamp="$ctrl.build.status.startTimestamp"></duration-until-now></span>
      <span ng-switch-when="New">waiting for <duration-until-now timestamp="$ctrl.build.metadata.creationTimestamp"></duration-until-now></span>
      <span ng-switch-when="Pending">waiting for <duration-until-now timestamp="$ctrl.build.metadata.creationTimestamp"></duration-until-now></span>
      <span ng-switch-default>
        <span ng-if="$ctrl.build.status.startTimestamp">{{$ctrl.build.status.startTimestamp | duration : $ctrl.build.status.completionTimestamp}}</span>
        <span ng-if="!$ctrl.build.status.startTimestamp">waited for {{$ctrl.build.metadata.creationTimestamp | duration : $ctrl.build.status.completionTimestamp}}</span>
      </span>
    </span>
  </div>
  <div class="col-md-2">
    <button ng-if="$ctrl.build.status.phase === 'Complete'" ng-click="$ctrl.toggleBuildDownloadUrl()" class="btn btn-default download-btn">Download</button>
  </div>
  <mobile-client-download-url show-panel="$ctrl.buildDownloadPanelExpanded" mobile-build="$ctrl.build"></mobile-client-download-url>
</div>